fragment Compromiso on compromiso {
  id
  orden
  titulo
  plan_id
  fecha_creacion
  metadatos
  hitos_aggregate {
    aggregate {
      count
    }
  }
}

fragment Actividad on actividad {
  id
  hito_id
  orden
  titulo
  fecha_creacion
  metadatos
  fecha_inicial
  fecha_final
}

fragment Entregable on entregable {
  id
  titulo
  fecha_creacion
  archivos
  metadatos
  hito_id
  revisiones_aggregate {
    aggregate {
      count
      min {
        fecha_creacion
      }
      max {
        fecha_creacion
      }
    }
  }
  revisiones {
    id
    fecha_creacion
    metadatos
    aprobado
    comentario
    parent_id
    entregable_id
  }
}

fragment Hito on hito {
  id
  compromiso_id
  fecha_creacion
  orden
  titulo
  metadatos
  fecha_inicial
  fecha_final
  entregables {
    ...Entregable
  }
  entregables_aggregate {
    aggregate {
      min {
        fecha_creacion
      }
      max {
        fecha_creacion
      }
    }
  }
  actividades(order_by: { orden: asc }) {
    ...Actividad
  }
  actividades_aggregate {
    aggregate {
      count
      min {
        fecha_creacion
        fecha_inicial
        fecha_final
      }
      max {
        fecha_creacion
        fecha_inicial
        fecha_final
      }
    }
  }
}
